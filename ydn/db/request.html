---
layout: ydn-api
description: "Getting started with YDN-DB javascript module"
title: "Class ydn.db.Request"
article:
  written_on: 2014-04-01
  updated_on: 2014-04-28
  order: 7
collection: "ydn.db"
namespace: "ydn.db"
---

  <h2 class="classTitle">Class ydn.db.Request</h2>
  <p> An instance of the Request class represents a result of a database
    request. </p>
  <p> Extends: <a href="http://docs.closure-library.googlecode.com/git/class_goog_async_Deferred.html"><code>goog.async.Deferred</code></a>
  </p>
  <div class="sectionTitle"> Method </div>
  <a name="abort"></a> <details> <summary>
  <div class="fixedFont"> <b>abort</b>() </div>
  <div class="description">Abort the transaction of the request. </div>
</summary>
        <pre>var req = db.put('store1', obj).done(function (key) {
  if (key &gt; 1000) {
    req.abort(); // request can be aborted because, transaction is not committed yet.
  }
});
</pre>
  <div class="details">
    <dl class="detailList">
      <dt class="heading">Throws:</dt>
      <dd><span class="light fixedFont">{!ydn.db.InvalidStateError}</span>
        If no active transaction.</dd>
    </dl>
  </div>
</details>
  <hr> <a name="always"></a> <details> <summary>
  <div class="fixedFont"> <b>always</b>(cb, opt_scope) </div>
  <div class="description">Register a callback function as both <code>done</code>
    and <code> fail</code> callbacks. </div>
</summary>
  <div>Raw method name: <code>addBoth</code></div>
  <dl class="detailList">
    <dt class="heading">Parameters:</dt>
    <dt><span class="light fixedFont">{function(this: T, *)}</span> <b>cb</b></dt>
    <dd>The function to be called with a result.</dd>
    <dt><span class="light fixedFont">{T=} </span><span class="light fixedFont optional">Optional.</span>
      <b>opt_scope</b></dt>
    <dd>An optional scope to call the callback in.</dd>
  </dl>
  <div class="details">
    <dl class="detailList">
      <dt class="heading">Returns:</dt>
      <dd><span class="light fixedFont">{!ydn.db.Request}</span> This
        Deferred.</dd>
    </dl>
  </div>
</details>
  <hr> <a name="done"></a> <details> <summary>
  <div class="fixedFont"> <b>done</b>(cb, opt_scope) </div>
  <div class="description">Register a callback function to be called
    with a successful result. </div>
</summary>
  <p>This is same as calling <code>then</code> method without <code>fail</code>
    callback.</p>
  <p>Raw method name: <code>addCallback</code></p>
  <dl class="detailList">
    <dt class="heading">Parameters:</dt>
    <dt><span class="light fixedFont">{function(this: T, *)}</span> <b>cb</b></dt>
    <dd>The function to be called with a successful result.</dd>
    <dt><span class="light fixedFont">{T=} </span><span class="light fixedFont optional">Optional.</span>
      <b>opt_scope</b></dt>
    <dd>An optional scope to call the callback in.</dd>
  </dl>
  <div class="details">
    <dl class="detailList">
      <dt class="heading">Returns:</dt>
      <dd><span class="light fixedFont">{!ydn.db.Request}</span> This
        Deferred.</dd>
    </dl>
  </div>
</details>
  <hr><a name="canAbort"></a> <details> <summary>
  <div class="fixedFont"> <b>canAbort</b>() </div>
  <div class="description">Check whether request can be aborted. </div>
</summary>
  <div class="details">
    <dl class="detailList">
      <dt class="heading">Returns:</dt>
      <dd><span class="light fixedFont">{boolean}</span> Return true if
        the request can be aborted.</dd>
    </dl>
  </div>
</details>
  <hr> <a name="fail"></a> <details> <summary>
  <div class="fixedFont"> <b>fail</b>(cb, opt_scope) </div>
  <div class="description">Register a callback function to be called
    with a error result. </div>
</summary>
  <p>This is same as calling <code>then</code> method without <code>done</code>
    callback.</p>
  <p>Raw method name: <code>addErrback</code></p>
  <dl class="detailList">
    <dt class="heading">Parameters:</dt>
    <dt><span class="light fixedFont">{function(this: T, *)}</span> <span
        style="font-weight: bold;">cb</span></dt>
    <dd>The function to be called with a error result.</dd>
    <dt><span class="light fixedFont">{T=} </span><span class="light fixedFont optional">Optional.</span>
      <b>opt_scope</b></dt>
    <dd>An optional scope to call the callback in.</dd>
  </dl>
  <div class="details">
    <dl class="detailList">
      <dt class="heading">Returns:</dt>
      <dd><span class="light fixedFont">{!ydn.db.Request}</span> This
        Deferred.</dd>
    </dl>
  </div>
</details>
  <hr> <a name="state"></a> <details> <summary>
  <div class="fixedFont"> <b>state</b>() </div>
  <span class="version" title="Only available in jquery build.">jquery</span>
  <div class="description">Determine the current state of a Deferred
    object.</div>
</summary>
  <div class="details">
    <dl class="detailList">
      <dt class="heading">Returns:</dt>
      <dd><span class="light fixedFont">{string}</span>Either one of
        'pending', 'rejected' or 'resolved'.</dd>
    </dl>
  </div>
</details>
  <hr> <a name="then"></a> <details> <summary>
  <div class="fixedFont"> <b>then</b>(done, fail, opt_scope) </div>
  <div class="description">Registers a callback function and an fail
    function at the same position in the execution sequence. </div>
</summary>
  <p> If no value is returned by the <code>done</code> callback function,
    the result value is unchanged. If a new value is returned, it becomes
    the <code>Deferred</code> result and will be passed to the next
    callback in the execution sequence. If the function throws an error,
    the error becomes the new result and will be passed to the next <code>fail</code>
    callback in the execution chain. If the function returns a promise or
    <a href="http://promises-aplus.github.io/promises-spec/#point-7">thenable</a>,
    the execution sequence will be blocked until that <code>Deferred</code>
    fires. Its result will be passed to the next <code>done</code>
    callback (or <code>fail</code> callback if it is an error result) in
    this Deferred's execution sequence.</p>
  <p>Raw method name: <code>addCallbacks</code></p>
  <dl class="detailList">
    <dt class="heading">Parameters:</dt>
    <dt><span class="light fixedFont">{function(this: T, *)}</span> <b>done</b></dt>
    <dd>The function to be called with a sucess result.</dd>
    <dt><span class="light fixedFont">{function(this: T, *)}</span> <b>fail</b></dt>
    <dd>The function to be called with a error result.</dd>
    <dt><span class="light fixedFont">{T=} </span><span class="light fixedFont optional">Optional.</span>
      <b>opt_scope</b></dt>
    <dd>An optional scope to call the callback in.</dd>
  </dl>
  <div class="details">
    <dl class="detailList">
      <dt class="heading">Returns:</dt>
      <dd><span class="light fixedFont">{!ydn.db.Request}</span> This
        Deferred.</dd>
    </dl>
  </div>
</details>
  <hr> <a name="toJSON"></a> <details> <summary>
  <div class="fixedFont"> <b>toJSON</b>() </div>
  <span class="version" title="Only available in developmental build.">dev</span>
  <div class="description">JSON representation of this object.</div>
</summary>
  <p>Example JSON:</p>
        <pre>{
  branchNo: 0
  method: ["get", "iter"]
  requestNo: 1
  transactionNo: 8
}
</pre>
  <div class="details">
    <dl class="detailList">
      <dt class="heading">Returns:</dt>
      <dd><span class="light fixedFont">{!Object}</span>JSON
        representation of this object.</dd>
    </dl>
  </div>
</details>
  <hr> <a name="toString"></a> <details> <summary>
  <div class="fixedFont"> <b>toString</b>() </div>
  <span class="version" title="Only available in developmental build.">dev</span>
  <div class="description">String representation of this object.</div>
</summary>
  <div> The returning string starts with 'Request', follow by request
    method and then transaction label if exists. Transaction label has
    serial numbers of branch, transaction and request, represented by B, T
    and R, respectively. </div>
  <div class="details">
    <dl class="detailList">
      <dt class="heading">Returns:</dt>
      <dd><span class="light fixedFont">{string}</span>String
        representation of this object.</dd>
    </dl>
  </div>
</details>
<br /><div class="g-comments"></div>