---
layout: ydn-api
description: "Getting started with YDN-DB javascript module"
title: "Interface ydn.db.ICursor"
article:
  written_on: 2014-04-01
  updated_on: 2014-04-28
  order: 3
collection: "ydn.db"
namespace: "ydn.db"
---

  <h2 class="classTitle">Interface ydn.db.ICursor </h2>
  <p> Cursors are a transient mechanism used to iterate on stream of ordered
    records from a store. <span class="version">cursor</span></p>
  <p>Cursors are obtained by opening an <a href="query.html">iterator</a>.
    Opening a key iterator enumerate key cursors while opening a value
    iterator enumerate value cursors. Key cursor is read only and does not
    have value. Enumerating key cursor is much faster than value cursor and
    commonly used in filter and join query.</p>
      <pre>var iter = new ydn.db.ValueIterator('player');
db.open(iter, function next(icursor) {
  var v = icursor.value();
  if (v.amount &lt; 50) {
     v.amount += 10;
     icursor.update(v);
  }
});
</pre><br>
  <div class="sectionTitle"> Methods </div>
  <details> <summary> <a name="indexKey"></a>
    <div class="fixedFont"> <b>getKey(i)</b> <br>
    </div>
    <div class="description"> Get <em>effective key</em> of the cursor
      for respective store.</div>
  </summary>The ordering is same as ordering of peers on the query
    object.&nbsp;
    <dl class="detailList">
      <dt class="heading">Parameters:</dt>
      <dt><span class="light fixedFont">{number=}</span> <b>i</b></dt>
      <dd><span class="light fixedFont optional">Optional.</span>Store
        index. Default to 0 for base store.<br>
      </dd>
    </dl>
    <dl class="detailList">
      <dt class="heading">Returns:</dt>
      <dd><span class="light fixedFont">{*|undefined}</span> <em></em>
        Effective key.</dd>
    </dl>
  </details>
  <hr> <details> <summary> <a name="key"></a>
  <div class="fixedFont"> <b>getPrimaryKey</b>(i)&nbsp; <br>
  </div>
  <div class="description"> Get <em>primary key</em> of the cursor for
    respective store.</div>
</summary>The ordering is same as ordering of peers on the query object.
  <dl class="detailList">
    <dt class="heading">Parameters:</dt>
    <dt><span class="light fixedFont">{number=}</span> <b>i</b></dt>
    <dd><span class="light fixedFont optional">Optional.</span> Store
      index. Default to base store.<br>
    </dd>
  </dl>
  <dl class="detailList">
    <dt class="heading">Returns:</dt>
    <dd><span class="light fixedFont">{*|undefined}</span> <em></em>Current
      primary
      key.</dd>
  </dl>
</details>
  <hr> <details> <summary> <a name="clear"></a>
  <div class="fixedFont"> <b>clear</b>(i) </div>
  <div class="description">Clear record for value cursor.</div>
</summary>
  <dl class="detailList">
    <dt class="heading">Parameters:</dt>
    <dt><span class="light fixedFont">{number=}</span> <b>i</b></dt>
    <dd><span class="light fixedFont optional">Optional.</span> Store
      index. <br>
    </dd>
  </dl>
  <dl class="detailList">
    <dt class="heading">Returns:</dt>
    <dd><span class="light fixedFont">{!goog.async.Deferred.&lt;number&gt;}</span>
      <em></em>return number of records cleared in a deferred object.</dd>
  </dl>
</details>
  <hr> <details> <summary> <a name="merge"></a>
  <div class="fixedFont"> <b>merge</b>() <br>
  </div>
  <div class="description"> Merge cursor values into single object.</div>
</summary>Merging is performed by replacing <code>on</code> field name
  with cursor value of a peer store.
  <dl class="detailList">
    <dt class="heading">Returns:</dt>
    <dd><span class="light fixedFont">{!Object}</span> Merged cursor
      value.</dd>
  </dl>
  <br>
</details>
  <hr> <details> <summary> <a name="update"></a>
  <div class="fixedFont"> <b>update</b>(value, i) </div>
  <div class="description">Update current record for value cursor.</div>
</summary>
  <dl class="detailList">
    <dt class="heading">Parameters:</dt>
    <dt><span class="light fixedFont">{*}</span> <b>value</b></dt>
    <dd>Value to update.</dd>
    <dt><span class="light fixedFont">{number=}</span> <b>i</b></dt>
    <dd><span class="light fixedFont optional">Optional.</span> Store
      index.</dd>
  </dl>
  <dl class="detailList">
    <dt class="heading">Returns:</dt>
    <dd><span class="light fixedFont">{!goog.async.Deferred}</span> <em></em>return
      updated primary key in a deferred object.</dd>
  </dl>
  <dl class="detailList">
  </dl>
</details>
  <hr> <details> <summary> <a name="value"></a>
  <div class="fixedFont"> <b>getValue(i)</b> <br>
  </div>
  <div class="description"> Get <em>cursor value</em> of a value
    cursor.</div>
</summary>
  <div>Should it required the value to be retained beyond iteration
    function callback scope, the value must be cloned to prevent disposal.</div>
  <div>The ordering is same as ordering of peers on the query object.</div>
  <dl class="detailList">
    <dt class="heading">Parameters:</dt>
    <dt><span class="light fixedFont">{number=}</span> <b>i</b></dt>
    <dd><span class="light fixedFont optional">Optional.</span>Store
      index. Default to 0 for base store.<br>
    </dd>
  </dl>
  <dl class="detailList">
    <dt class="heading">Returns:</dt>
    <dd><span class="light fixedFont">{*|undefined}</span> <em></em>
      Record value of the cursor. This is <code>undefined</code> for key
      cursor.</dd>
  </dl>
  <br>
</details>

<br /><div class="g-comments"></div>